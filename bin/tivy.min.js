!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Tivy=t()}}(function(){return function t(e,i,s){function h(o,n){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!n&&a)return a(o,!0);if(r)return r(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return h(i?i:t)},u,u.exports,t,e,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)h(s[o]);return h}({1:[function(t,e,i){var s=function(t){if(t||(t={}),this.id=t.id||"stage_"+1*new Date,this.position=t.position||{x:0,y:0},this.size=t.size||{width:1920,height:1080},this.background=t.background,this.zIndex=t.zIndex||0,document.getElementById(this.id))throw new Error("Stage id is dumplicate");this.width=this.size.width,this.height=this.size.height;var e=document.createElement("canvas");e.id=this.id,e.style.position="absolute",e.style.top=this.position.y,e.style.left=this.position.x,e.style.zIndex=this.zIndex,e.style.background=this.background,document.body.appendChild(e);var i=new PIXI.Container;this.render=new PIXI.WebGLRenderer(this.size.width,this.size.height,{transparent:!0,view:e,forceFXAA:!0}),i.id=this.id,i.isStage=!0,this._stage=i};s.prototype={show:function(){this.renderable=!0,this.repaint()},hide:function(){this.renderable=!1,this.repaint()},repaint:function(t){t?this.render.render(t):this.render.render(this._stage)},addChild:function(t){this._stage.addChild(t)},removeChild:function(t){this._stage.removeChild(t)}},e.exports=s},{}],2:[function(t,e,i){function s(t){if(PIXI.Container.call(this),t||(t={}),this.stage=t.stage,!this.stage)throw new Error("A stage is required.");this.owner=t.owner,this.position=t.position||{x:0,y:0},this.size=t.size,this.size&&this.size.width>0&&this.size.height>0&&(this.width=this.size.width,this.height=this.size.height),this.owner?this.owner.addChild(this):this.stage.addChild(this)}s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.bringToFront=function(){if(this.parent){var t=this.parent;t.removeChild(this),t.addChild(this)}},s.prototype.sendToBack=function(){if(this.parent){var t=this.parent;t.removeChild(this),t.addChildAt(this,0)}}},{}],3:[function(t,e,i){function s(t){t||(t={}),this.size=t.size=t.size||{width:200,height:200},h.call(this,t),this.container=new PIXI.Container,this.addChild(this.container),this.controls=[],this.currentIndex=-1,this.currentControl=null}var h=t("./UIObject");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.attachEvent=function(t){this.controls.push(t);var e=this.controls.indexOf(t),i=this;t.on("mouseover",function(){var t=i.currentIndex,s=i.currentControl;i.currentIndex=e,i.currentControl=this,i.emit("focus",this,e),t!==e&&i.emit("change",this,e,s,t)}),t.on("mouseout",function(){i.emit("leave",this,e)}),t.on("keydown",function(){console.log("keydown")}),t.on("touchstart",function(){var t=i.currentIndex,s=i.currentControl;i.currentIndex=e,i.currentControl=this,i.emit("focus",this,e),t!==e&&i.emit("change",this,e,s,t)}),t.on("touchend",function(t){i.currentControl==t.target&&i.emit("execute",this,e),i.emit("leave",i.currentControl,i.currentIndex)}),t.on("click",function(t){i.emit("execute",this,e)})},s.prototype.activate=function(){this.isActive||(h.prototype.activate.call(this),this.currentIndex<0&&(this.currentIndex=0,this.currentControl=this.controls[0]),this.emit("change",this.currentControl,this.currentIndex,null,-1))}},{"./UIObject":2}],4:[function(t,e,i){function s(t){if(t||(t={}),h.call(this,t),this.textureDefault=t.textureDefault,!this.textureDefault)throw new Error("textureDefault is required.");this.textureDown=t.textureDown,this.btnSprite=null,this.interactive=!0,this._paint(this.textureDefault);var e=this;if(this.textureDown){var i=function(){e._paint(e.textureDown)},s=function(){e._paint(e.textureDefault)};this.on("mousedown",i),this.on("mouseup",s),this.on("touchstart",i),this.on("touchend",s)}}var h=t("../UIObject");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,e.exports=s,s.prototype._paint=function(t){this.btnSprite?this.btnSprite.texture=t:(this.btnSprite=new PIXI.Sprite(t),this.addChild(this.btnSprite));var e=this.stage;t.baseTexture.on("loaded",function(){e.repaint()}),e.repaint()}},{"../UIObject":2}],5:[function(t,e,i){function s(t){if(t||(t={}),this.size=t.size=t.size||{width:200,height:200},h.call(this,t),this.imageUrl=t.imageUrl,!this.imageUrl)throw new Error("Frame imageUrl is required.");this.radius=t.radius,this.borderLength=t.borderLength,this.imageLength=t.imageLength,this._init()}var h=t("../UIObject");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,e.exports=s,s.prototype._init=function(){var t=PIXI.Texture.fromImage(this.imageUrl),e=new PIXI.Texture(t,{x:0,y:0,width:this.borderLength,height:this.borderLength}),i=new PIXI.Texture(t,{x:this.borderLength,y:0,width:1,height:this.borderLength}),s=new PIXI.Texture(t,{x:this.imageLength-this.borderLength,y:0,width:this.borderLength,height:this.borderLength}),h=new PIXI.Texture(t,{x:this.imageLength-this.borderLength,y:this.borderLength,width:this.borderLength,height:1}),r=new PIXI.Texture(t,{x:this.imageLength-this.borderLength,y:this.imageLength-this.borderLength,width:this.borderLength,height:this.borderLength}),o=new PIXI.Texture(t,{x:this.borderLength,y:this.imageLength-this.borderLength,width:1,height:this.borderLength}),n=new PIXI.Texture(t,{x:0,y:this.imageLength-this.borderLength,width:this.borderLength,height:this.borderLength}),a=new PIXI.Texture(t,{x:0,y:this.borderLength,width:this.borderLength,height:1}),d=this._clt=new PIXI.Sprite(e),u=this._ct=new PIXI.Sprite(i),l=this._crt=new PIXI.Sprite(s),c=this._cr=new PIXI.Sprite(h),p=this._crb=new PIXI.Sprite(r),g=this._cb=new PIXI.Sprite(o),x=this._clb=new PIXI.Sprite(n),w=this._cl=new PIXI.Sprite(a);this.addChild(d),this.addChild(u),this.addChild(l),this.addChild(c),this.addChild(p),this.addChild(g),this.addChild(x),this.addChild(w),this.setSize(this.size)},s.prototype.setSize=function(t){var e=t.width,i=t.height;e<=2*this.radius&&(e=2*this.radius+1),i<=2*this.radius&&(i=2*this.radius+1),this.size.width=e,this.size.height=i,this._clt.position={x:-this.borderLength+this.radius,y:-this.borderLength+this.radius},this._crt.position={x:e-this.radius,y:this.radius-this.borderLength},this._crb.position={x:e-this.radius,y:i-this.radius},this._clb.position={x:this.radius-this.borderLength,y:i-this.radius},this._ct.position={x:this.radius,y:-this.borderLength+this.radius},this._ct.width=e-2*this.radius,this._cr.position={x:e-this.radius,y:this.radius},this._cr.height=i-2*this.radius,this._cb.position={x:this.radius,y:i-this.radius},this._cb.width=e-2*this.radius,this._cl.position={x:this.radius-this.borderLength,y:this.radius},this._cl.height=i-2*this.radius},s.prototype.setPosition=function(t){this.x=t.x,this.y=t.y},s.prototype.setBounds=function(t){this.x=t.x,this.y=t.y,this.setSize({width:t.width,height:t.height})}},{"../UIObject":2}],6:[function(t,e,i){function s(t){t||(t={}),this.size=t.size=t.size||{width:300,height:400},h.call(this,t),this.placeHolderTexture=t.placeHolderTexture,this.showText=t.showText||!1,this.text=t.text,this.textColor=t.textColor||8355711,this.textBgColor=t.textBgColor||16777215,this.textHeight=t.textHeight||50,this.font=t.font||"25px 迷你简准圆",this.imageUrl=t.imageUrl,this.radius=t.radius||0,this.posterTexture=null,this.imageSprite=null,this.textLabel=null,this.posterSetted=!1,this.interactive=!0,this.data=null,this._init()}var h=t("../UIObject");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,e.exports=s,s.prototype._init=function(){if(this.radius){var t=new PIXI.Graphics;t.lineStyle(0),t.beginFill(16777215),t.drawRoundedRect(0,0,this.size.width,this.size.height,this.radius),t.endFill(),this.addChild(t),this.mask=t}var e=new PIXI.Graphics;e.lineStyle(0),e.beginFill(this.textBgColor,.5),this.showText&&this.text?(e.drawRect(0,0,this.size.width,this.size.height-this.textHeight),e.beginFill(this.textBgColor,.7),e.drawRect(0,this.size.height-50,this.size.width,this.textHeight),this.textLabel=new PIXI.Text(this.text,{font:this.font,fill:this.textColor}),this.textLabel.y=this.size.height-this.textHeight+(this.textHeight-this.textLabel.height)/2,this.textLabel.width>this.size.width?this.textLabel.x=10:this.textLabel.x=(this.size.width-this.textLabel.width)/2,e.addChild(this.textLabel)):e.drawRect(0,0,this.size.width,this.size.height),e.endFill(),this.addChild(e),this.imageSprite=new PIXI.Sprite(this.placeHolderTexture),this.imageSprite.width=this.size.width,this.imageSprite.height=this.showText?this.size.height-this.textHeight:this.size.height,this.imageUrl&&this.setContent(this.imageUrl),this.addChild(this.imageSprite),this.stage.repaint()},s.prototype.setContent=function(t,e,i){if(t){t=t+"?t="+1*new Date,this.posterTexture=PIXI.Texture.fromImage(t),this.imageSprite.texture=this.posterTexture;var s=this.stage;this.posterTexture.baseTexture.on("loaded",function(){s.repaint()})}this.showText&&e&&(this.textLabel.text=e,this.textLabel.width>this.size.width?this.textLabel.x=10:this.textLabel.x=(this.size.width-this.textLabel.width)/2),this.text=e,this.data=i,this.posterSetted=!0},s.prototype.destroy=function(t){this.removeChildren(),this.stage.removeChild(this),h.prototype.destroy.call(this,!0),t||this.posterTexture&&this.posterSetted&&this.posterTexture.destroy(!0),this.stage.repaint()}},{"../UIObject":2}],7:[function(t,e,i){function s(t){if(t||(t={}),h.call(this,t),this.layout=t.layout,!this.layout)throw new Error("layout is null");this._init()}var h=t("../UIObjectGroup"),r=t("../basic/Tile");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,e.exports=s,s.prototype._init=function(){var t=this;this.layout.tiles.forEach(function(e,i){var s=new r({stage:t.stage,owner:t.container,size:{width:e.width,height:e.height},position:{x:e.x,y:e.y},placeHolderTexture:t.layout.placeHolderTexture,radius:null==e.radius?t.layout.radius:e.radius,data:e.data});t.attachEvent(s)})},s.prototype.bindData=function(t){var e=this;t.forEach(function(t,i){e.controls[i].setContent(t.imageUrl,t.text,t.data)})}},{"../UIObjectGroup":3,"../basic/Tile":6}],8:[function(t,e,i){function s(t){if(t||(t={}),this.size=t.size=t.size||{width:300,height:400},h.call(this,t),this.placeHolderTexture=t.placeHolderTexture,!this.placeHolderTexture)throw new Error("placeHolderTexture is null");this.showText=t.showText||!1,this.text=t.text,this.textColor=t.textColor||8355711,this.textBgColor=t.textBgColor||16777215,this.textHeight=t.textHeight||50,this.font=t.font||"25px 迷你简准圆",this.imageUrl=t.imageUrl,this.radius=t.radius||0,this.posterTexture=null,this.imageSprite=null,this.textLabel=null,this.posterSetted=!1,this._paint()}var h=t("../UIObject");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,e.exports=s,s.prototype._paint=function(){if(this.radius){var t=new PIXI.Graphics;t.lineStyle(0),t.beginFill(16777215),t.drawRoundedRect(0,0,this.size.width,this.size.height,this.radius),t.endFill(),this.addChild(t),this.mask=t}var e=new PIXI.Graphics;e.lineStyle(0),e.beginFill(this.textBgColor,.5),this.showText&&this.text?(e.drawRect(0,0,this.size.width,this.size.height-this.textHeight),e.beginFill(this.textBgColor,.7),e.drawRect(0,this.size.height-50,this.size.width,this.textHeight),this.textLabel=new PIXI.Text(this.text,{font:this.font,fill:this.textColor}),this.textLabel.y=this.size.height-this.textHeight+(this.textHeight-this.textLabel.height)/2,this.textLabel.width>this.size.width?this.textLabel.x=10:this.textLabel.x=(this.size.width-this.textLabel.width)/2,e.addChild(this.textLabel)):e.drawRect(0,0,this.size.width,this.size.height),e.endFill(),this.addChild(e),this.imageSprite=new PIXI.Sprite(this.placeHolderTexture),this.imageSprite.width=this.size.width,this.imageSprite.height=this.showText?this.size.height-this.textHeight:this.size.height,this.imageUrl&&this.setContent(this.imageUrl),this.addChild(this.imageSprite),this.stage.repaint()},s.prototype.setContent=function(t,e){if(t){t=t+"?t="+1*new Date,this.posterTexture=PIXI.Texture.fromImage(t),this.imageSprite.texture=this.posterTexture;var i=this.stage;this.posterTexture.baseTexture.on("loaded",function(){i.repaint()})}this.showText&&e&&(this.textLabel.text=e,this.textLabel.width>this.size.width?this.textLabel.x=10:this.textLabel.x=(this.size.width-this.textLabel.width)/2),this.text=e,this.posterSetted=!0},s.prototype.destroy=function(t){this.removeChildren(),this.stage.removeChild(this),h.prototype.destroy.call(this,!0),t||this.posterTexture&&this.posterSetted&&this.posterTexture.destroy(!0),this.stage.repaint()}},{"../UIObject":2}],9:[function(t,e,i){function s(){this.isActive=!1}s.prototype.constructor=s,e.exports=s,s.prototype.activate=function(){if(!this.isActive){this.isActive=!0;var t=this;window.document.addEventListener("keydown",function(e){t.emit("keydown",e)},!0),window.document.addEventListener("keyup",function(e){t.emit("keyup",e)},!0),window.document.addEventListener("keypress",function(e){t.emit("keypress",e)},!0),this.emit("activated")}},s.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("keydown"),window.document.removeEventListener("keyup"),window.document.removeEventListener("keypress"),this.emit("deactivated"))}},{}],10:[function(t,e,i){(function(i){var s=e.exports={UIObject:t("./UIObject"),UIObjectGroup:t("./UIObjectGroup"),Stage:t("./Stage"),Button:t("./basic/Button"),Tile:t("./basic/Tile"),ImageFrame:t("./basic/ImageFrame"),Poster:t("./components/Poster"),Metro:t("./components/Metro"),KeyboardManager:t("./events/KeyboardManager")};Object.assign(s.UIObject.prototype,s.KeyboardManager.prototype),i.Tivy=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Stage":1,"./UIObject":2,"./UIObjectGroup":3,"./basic/Button":4,"./basic/ImageFrame":5,"./basic/Tile":6,"./components/Metro":7,"./components/Poster":8,"./events/KeyboardManager":9}]},{},[10])(10)});
//# sourceMappingURL=tivy.min.js.map
