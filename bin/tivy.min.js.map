{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Stage.js","tivy.min.js","src/UIObject.js","src/components/Poster.js","src/src/index.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Tivy","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"Stage","options","id","Date","position","x","y","size","w","h","background","zIndex","document","getElementById","canvas","createElement","style","top","left","body","appendChild","_stage","PIXI","Container","width","height","render","WebGLRenderer","transparent","view","forceFXAA","isStage","prototype","show","renderable","repaint","hide","uiObject","addChild",2,"UIObject","stage","Object","create","constructor",3,"Poster","placeHolderTexture","textColor","textBgColor","textHeight","font","text","imageUrl","isWithText","radius","posterTexture","imageSprite","textLabel","imageSetted","paint","mask","Graphics","lineStyle","beginFill","drawRoundedRect","endFill","drawRect","Text","fill","Sprite","setContent","imgUrl","Texture","fromImage","texture","baseTexture","on","posterSetted","../UIObject",4,"tivy","./Stage","./components/Poster"],"mappings":"CAAA,SAAAA,GAAA,GAAA,gBAAAC,UAAA,mBAAAC,QAAAA,OAAAD,QAAAD,QAAA,IAAA,kBAAAG,SAAAA,OAAAC,IAAAD,UAAAH,OAAA,CAAA,GAAAK,EAAAA,GAAA,mBAAAC,QAAAA,OAAA,mBAAAC,QAAAA,OAAA,mBAAAC,MAAAA,KAAAC,KAAAJ,EAAAK,KAAAV,MAAA,WAAA,MAAA,SAAAW,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAhB,GAAA,GAAAqB,OAAA,uBAAAL,EAAA,IAAA,MAAAhB,GAAAsB,KAAA,mBAAAtB,EAAA,GAAAuB,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,IAAA,GAAAmB,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAW,GAAA,SAAAP,EAAAjB,EAAAD,GCoBA,GAAA0B,GAAA,SAAAC,GAUA,GATAA,IACAA,MAEAnB,KAAAoB,GAAAD,EAAAC,IAAA,SAAA,EAAA,GAAAC,MACArB,KAAAsB,SAAAH,EAAAG,WAAAC,EAAA,EAAAC,EAAA,GACAxB,KAAAyB,KAAAN,EAAAM,OAAAC,EAAA,KAAAC,EAAA,MACA3B,KAAA4B,WAAAT,EAAAS,WACA5B,KAAA6B,OAAAV,EAAAU,QAAA,EAEAC,SAAAC,eAAA/B,KAAAoB,IACA,KAAA,IAAAR,OAAA,yBAIA,IAAAoB,GAAAF,SAAAG,cAAA,SACAD,GAAAZ,GAAApB,KAAAoB,GACAY,EAAAE,MAAAZ,SAAA,WACAU,EAAAE,MAAAC,IAAAnC,KAAAsB,SAAAE,EACAQ,EAAAE,MAAAE,KAAApC,KAAAsB,SAAAC,EACAS,EAAAE,MAAAL,OAAA7B,KAAA6B,OACAG,EAAAE,MAAAN,WAAA5B,KAAA4B,WAEAE,SAAAO,KAAAC,YAAAN,EAEA,IAAAO,GAAA,GAAAC,MAAAC,SAGAF,GAAAG,MAAA1C,KAAAyB,KAAAC,EACAa,EAAAI,OAAA3C,KAAAyB,KAAAE,EAEA3B,KAAA4C,OAAA,GAAAJ,MAAAK,cAAA7C,KAAAyB,KAAAC,EAAA1B,KAAAyB,KAAAE,GACAmB,aAAA,EACAC,KAAAf,EAEAgB,WAAA,IAGAT,EAAAnB,GAAApB,KAAAoB,GACAmB,EAAAU,SAAA,EAEAjD,KAAAuC,OAAAA,EAIArB,GAAAgC,WAIAC,KAAA,WACAnD,KAAAoD,YAAA,EACApD,KAAAqD,WAKAC,KAAA,WACAtD,KAAAoD,YAAA,EACApD,KAAAqD,WAOAA,QAAA,SAAAE,GACAA,EACAvD,KAAA4C,OAAAA,OAAAW,GAEAvD,KAAA4C,OAAAA,OAAA5C,KAAAuC,SAQAiB,SAAA,SAAAD,GACAvD,KAAAuC,OAAAiB,SAAAD,KAKA9D,EAAAD,QAAA0B,OCGMuC,GAAG,SAAS/C,EAAQjB,EAAOD,GChGjC,QAAAkE,GAAAvC,GAOA,GANAqB,KAAAC,UAAA1B,KAAAf,MACAmB,IACAA,MAGAnB,KAAA2D,MAAAxC,EAAAwC,OACA3D,KAAA2D,MACA,KAAA,IAAA/C,OAAA,uBAEAZ,MAAA2D,MAAAH,SAAAxD,MAGA0D,EAAAR,UAAAU,OAAAC,OAAArB,KAAAC,UAAAS,WACAQ,EAAAR,UAAAY,YAAAJ,EACAjE,EAAAD,QAAAkE,OD4GMK,GAAG,SAASrD,EAAQjB,EAAOD,GE3HjC,QAAAwE,GAAA7C,GAOA,GANAuC,EAAA3C,KAAAf,KAAAmB,GACAA,IACAA,MAGAnB,KAAAiE,mBAAA9C,EAAA8C,oBACAjE,KAAAiE,mBACA,KAAA,IAAArD,OAAA,6BAGAZ,MAAAyB,KAAAN,EAAAM,OAAAC,EAAA,IAAAC,EAAA,KACA3B,KAAAsB,SAAAH,EAAAG,WAAAC,EAAA,EAAAC,EAAA,GACAxB,KAAAkE,UAAA/C,EAAA+C,WAAA,QACAlE,KAAAmE,YAAAhD,EAAAgD,aAAA,SACAnE,KAAAoE,WAAAjD,EAAAiD,YAAA,GACApE,KAAAqE,KAAAlD,EAAAkD,MAAA,aACArE,KAAAsE,KAAAnD,EAAAmD,KACAtE,KAAAuE,SAAApD,EAAAoD,SACAvE,KAAAwE,WAAArD,EAAAqD,aAAA,EACAxE,KAAAyE,OAAAtD,EAAAsD,QAAA,GACAzE,KAAA0C,MAAA1C,KAAAyB,KAAAC,EACA1B,KAAA2C,OAAA3C,KAAAyB,KAAAE,EACA3B,KAAA0E,cAAA,KACA1E,KAAA2E,YAAA,KACA3E,KAAA4E,UAAA,KACA5E,KAAA6E,aAAA,EAEA7E,KAAA8E,QAtCA,GAAApB,GAAAhD,EAAA,cAyCAsD,GAAAd,UAAAU,OAAAC,OAAAH,EAAAR,WACAc,EAAAd,UAAAY,YAAAE,EACAvE,EAAAD,QAAAwE,EAOAA,EAAAd,UAAA4B,MAAA,WACA,GAAA9E,KAAAyE,OAAA,CACA,GAAAM,GAAA,GAAAvC,MAAAwC,QACAD,GAAAE,UAAA,GACAF,EAAAG,UAAA,UACAH,EAAAI,gBAAA,EAAA,EAAAnF,KAAAyB,KAAAC,EAAA1B,KAAAyB,KAAAE,EAAA3B,KAAAyE,QACAM,EAAAK,UACApF,KAAAwD,SAAAuB,GACA/E,KAAA+E,KAAAA,EAIA,GAAAnF,GAAA,GAAA4C,MAAAwC,QACApF,GAAAqF,UAAA,GACArF,EAAAsF,UAAAlF,KAAAmE,YAAA,IACAnE,KAAAwE,YAAAxE,KAAAsE,MACA1E,EAAAyF,SAAA,EAAA,EAAArF,KAAAyB,KAAAC,EAAA1B,KAAAyB,KAAAE,EAAA3B,KAAAoE,YAGAxE,EAAAsF,UAAAlF,KAAAmE,YAAA,IACAvE,EAAAyF,SAAA,EAAArF,KAAAyB,KAAAE,EAAA,GAAA3B,KAAAyB,KAAAC,EAAA1B,KAAAoE,YAEApE,KAAA4E,UAAA,GAAApC,MAAA8C,KAAAtF,KAAAsE,MACAD,KAAArE,KAAAqE,KACAkB,KAAAvF,KAAAkE,YAGAlE,KAAA4E,UAAApD,EAAAxB,KAAAyB,KAAAE,EAAA3B,KAAAoE,YAAApE,KAAAoE,WAAApE,KAAA4E,UAAAjC,QAAA,EACA3C,KAAA4E,UAAAlC,MAAA1C,KAAAyB,KAAAC,EACA1B,KAAA4E,UAAArD,EAAA,GAEAvB,KAAA4E,UAAArD,GAAAvB,KAAAyB,KAAAC,EAAA1B,KAAA4E,UAAAlC,OAAA,EAGA9C,EAAA4D,SAAAxD,KAAA4E,YAGAhF,EAAAyF,SAAA,EAAA,EAAArF,KAAAyB,KAAAC,EAAA1B,KAAAyB,KAAAE,GAEA/B,EAAAwF,UACApF,KAAAwD,SAAA5D,GAEAI,KAAA2E,YAAA,GAAAnC,MAAAgD,OAAAxF,KAAAiE,oBACAjE,KAAA2E,YAAAjC,MAAA1C,KAAAyB,KAAAC,EACA1B,KAAA2E,YAAAhC,OAAA3C,KAAAwE,WAAAxE,KAAAyB,KAAAE,EAAA3B,KAAAoE,WAAApE,KAAAyB,KAAAE,EAEA3B,KAAAuE,UACAvE,KAAAyF,WAAAzF,KAAAuE,UAGAvE,KAAAwD,SAAAxD,KAAA2E,aAEA3E,KAAA2D,MAAAN,WAUAW,EAAAd,UAAAuC,WAAA,SAAAC,EAAApB,GACA,GAAAoB,EAAA,CACAA,EAAAA,EAAA,MAAA,EAAA,GAAArE,MACArB,KAAA0E,cAAAlC,KAAAmD,QAAAC,UAAAF,GACA1F,KAAA2E,YAAAkB,QAAA7F,KAAA0E,aACA,IAAAnC,GAAAvC,KAAA2D,KACA3D,MAAA0E,cAAAoB,YAAAC,GAAA,SAAA,WACAxD,EAAAc,YAIArD,KAAAwE,YAAAF,IACAtE,KAAA4E,UAAAN,KAAAA,EACAtE,KAAA4E,UAAAlC,MAAA1C,KAAAyB,KAAAC,EACA1B,KAAA4E,UAAArD,EAAA,GAEAvB,KAAA4E,UAAArD,GAAAvB,KAAAyB,KAAAC,EAAA1B,KAAA4E,UAAAlC,OAAA,GAGA1C,KAAAsE,KAAAA,EACAtE,KAAAgG,cAAA,KF2IGC,cAAc,IAAIC,GAAG,SAASxF,EAAQjB,EAAOD,IAChD,SAAWM,GGhRX,GAAAqG,GAAA1G,EAAAD,SACA0B,MAAAR,EAAA,WACAsD,OAAAtD,EAAA,uBAGAZ,GAAAG,KAAAkG,IHkRGpF,KAAKf,KAAuB,mBAAXF,QAAyBA,OAAyB,mBAATC,MAAuBA,KAAyB,mBAAXF,QAAyBA,aAExHuG,UAAU,EAAEC,sBAAsB,SAAS,IAAI","file":"tivy.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * A Stage represents a canvas and an empty PIXI DisplayObject.\n * You can add child into stage directly.\n * And it can be repainted alone.\n *\n * ```js\n * var stage = new Tivy.Stage({\n   *  id: 'stage01', //The canvas id\n   *  size:{w:500, h:400}, //Size of the stage, w is width, h is heigt\n   *  position:{x:0, y:0}, //Position of the stage\n   *  background: '#ccc', //Backgound of the canvas, it is a css style.\n   *  zIndex: 10 //z-index of the canvas, it is a css style.\n   * });\n * ```\n *\n * @class\n * @memberof Tivy\n * @param options {json} - config json object.\n * @constructor\n */\nvar Stage = function (options) {\n  if (!options) {\n    options = {};\n  }\n  this.id         = options.id || 'stage_' + new Date() * 1;\n  this.position   = options.position || {x: 0, y: 0};\n  this.size       = options.size || {w: 1920, h: 1080};\n  this.background = options.background;\n  this.zIndex     = options.zIndex || 0;\n\n  if (document.getElementById(this.id)) {\n    throw new Error('Stage id is dumplicate');\n  }\n\n\n  var canvas              = document.createElement('canvas');\n  canvas.id               = this.id;\n  canvas.style.position   = 'absolute';\n  canvas.style.top        = this.position.y;\n  canvas.style.left       = this.position.x;\n  canvas.style.zIndex     = this.zIndex;\n  canvas.style.background = this.background;\n\n  document.body.appendChild(canvas);\n\n  var _stage = new PIXI.Container();\n  //_stage.screenX = this.position.x;\n  //_stage.screenY = this.position.y;\n  _stage.width  = this.size.w;\n  _stage.height = this.size.h;\n\n  this.render = new PIXI.WebGLRenderer(this.size.w, this.size.h, {\n    transparent: true,\n    view: canvas,\n    //antialias: true,\n    forceFXAA: true\n  });\n\n  _stage.id      = this.id;\n  _stage.isStage = true;\n\n  this._stage = _stage;\n\n};\n\nStage.prototype = {\n  /**\n   * Show the stage.\n   */\n  show: function () {\n    this.renderable = true;\n    this.repaint();\n  },\n  /**\n   * Hide the stage.\n   */\n  hide: function () {\n    this.renderable = false;\n    this.repaint();\n  },\n\n  /**\n   *\n   * @param uiObject {PIXI.DisplayObject} The object to repaint. if it is null, repaint this stage.\n   */\n  repaint: function (uiObject) {\n    if (uiObject) {\n      this.render.render(uiObject);\n    } else {\n      this.render.render(this._stage);\n    }\n  },\n\n  /**\n   *\n   * @param uiObject {PIXI.DisplayObject} The object to add.\n   */\n  addChild: function (uiObject) {\n    this._stage.addChild(uiObject);\n  }\n\n};\n\nmodule.exports = Stage;\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Tivy = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/**\n * A Stage represents a canvas and an empty PIXI DisplayObject.\n * You can add child into stage directly.\n * And it can be repainted alone.\n *\n * ```js\n * var stage = new Tivy.Stage({\n   *  id: 'stage01', //The canvas id\n   *  size:{w:500, h:400}, //Size of the stage, w is width, h is heigt\n   *  position:{x:0, y:0}, //Position of the stage\n   *  background: '#ccc', //Backgound of the canvas, it is a css style.\n   *  zIndex: 10 //z-index of the canvas, it is a css style.\n   * });\n * ```\n *\n * @class\n * @memberof Tivy\n * @param options {json} - config json object.\n * @constructor\n */\nvar Stage = function (options) {\n  if (!options) {\n    options = {};\n  }\n  this.id         = options.id || 'stage_' + new Date() * 1;\n  this.position   = options.position || {x: 0, y: 0};\n  this.size       = options.size || {w: 1920, h: 1080};\n  this.background = options.background;\n  this.zIndex     = options.zIndex || 0;\n\n  if (document.getElementById(this.id)) {\n    throw new Error('Stage id is dumplicate');\n  }\n\n\n  var canvas              = document.createElement('canvas');\n  canvas.id               = this.id;\n  canvas.style.position   = 'absolute';\n  canvas.style.top        = this.position.y;\n  canvas.style.left       = this.position.x;\n  canvas.style.zIndex     = this.zIndex;\n  canvas.style.background = this.background;\n\n  document.body.appendChild(canvas);\n\n  var _stage = new PIXI.Container();\n  //_stage.screenX = this.position.x;\n  //_stage.screenY = this.position.y;\n  _stage.width  = this.size.w;\n  _stage.height = this.size.h;\n\n  this.render = new PIXI.WebGLRenderer(this.size.w, this.size.h, {\n    transparent: true,\n    view: canvas,\n    //antialias: true,\n    forceFXAA: true\n  });\n\n  _stage.id      = this.id;\n  _stage.isStage = true;\n\n  this._stage = _stage;\n\n};\n\nStage.prototype = {\n  /**\n   * Show the stage.\n   */\n  show: function () {\n    this.renderable = true;\n    this.repaint();\n  },\n  /**\n   * Hide the stage.\n   */\n  hide: function () {\n    this.renderable = false;\n    this.repaint();\n  },\n\n  /**\n   *\n   * @param uiObject {PIXI.DisplayObject} The object to repaint. if it is null, repaint this stage.\n   */\n  repaint: function (uiObject) {\n    if (uiObject) {\n      this.render.render(uiObject);\n    } else {\n      this.render.render(this._stage);\n    }\n  },\n\n  /**\n   *\n   * @param uiObject {PIXI.DisplayObject} The object to add.\n   */\n  addChild: function (uiObject) {\n    this._stage.addChild(uiObject);\n  }\n\n};\n\nmodule.exports = Stage;\n\n},{}],2:[function(require,module,exports){\n/**\n * This is a base class which can be placed to {@link Tivy.Stage}\n * 这个是可以放置到舞台上的基类.\n *\n * @class\n * @memberof Tivy\n * @param options {json} - 构造参数, 必须有 stage 参数\n * @constructor\n * @extends PIXI.Container\n */\nfunction UIObject(options) {\n  PIXI.Container.call(this);\n  if (!options) {\n    options = {};\n  }\n\n  this.stage = options.stage;\n  if (!this.stage) {\n    throw new Error('A stage is required.');\n  }\n  this.stage.addChild(this);\n}\n\nUIObject.prototype             = Object.create(PIXI.Container.prototype);\nUIObject.prototype.constructor = UIObject;\nmodule.exports                 = UIObject;\n},{}],3:[function(require,module,exports){\nvar UIObject = require('../UIObject');\n/**\n * 广告招贴\n *\n * @class\n * @memberof Tivy\n * @param options {json} 配置节点\n * @constructor\n * @extends Tivy.UIObject\n */\nfunction Poster(options) {\n  UIObject.call(this, options);\n  if (!options) {\n    options = {};\n  }\n\n  this.placeHolderTexture = options.placeHolderTexture;\n  if (!this.placeHolderTexture) {\n    throw new Error('placeHolderTexture is null');\n  }\n\n  this.size          = options.size || {w: 300, h: 400};\n  this.position      = options.position || {x: 0, y: 0};\n  this.textColor     = options.textColor || 0x7f7f7f;\n  this.textBgColor   = options.textBgColor || 0xffffff;\n  this.textHeight    = options.textHeight || 50;\n  this.font          = options.font || '25px 迷你简准圆';\n  this.text          = options.text;\n  this.imageUrl      = options.imageUrl;\n  this.isWithText    = options.isWithText || false;\n  this.radius        = options.radius || 15;\n  this.width         = this.size.w;\n  this.height        = this.size.h;\n  this.posterTexture = null;\n  this.imageSprite   = null;\n  this.textLabel     = null;\n  this.imageSetted   = false;\n\n  this.paint();\n}\n\nPoster.prototype             = Object.create(UIObject.prototype);\nPoster.prototype.constructor = Poster;\nmodule.exports               = Poster;\n\n/**\n * 画上去\n *\n * @private\n */\nPoster.prototype.paint = function () {\n  if (this.radius) {\n    var mask = new PIXI.Graphics();\n    mask.lineStyle(0);\n    mask.beginFill(0xffffff);\n    mask.drawRoundedRect(0, 0, this.size.w, this.size.h, this.radius);\n    mask.endFill();\n    this.addChild(mask);\n    this.mask = mask;\n  }\n\n  //背景\n  var g = new PIXI.Graphics();\n  g.lineStyle(0);\n  g.beginFill(this.textBgColor, .5);\n  if (this.isWithText && this.text) {\n    g.drawRect(0, 0, this.size.w, this.size.h - this.textHeight);\n\n    //文字背景\n    g.beginFill(this.textBgColor, .7);\n    g.drawRect(0, this.size.h - 50, this.size.w, this.textHeight);\n\n    this.textLabel = new PIXI.Text(this.text, {\n      font: this.font,\n      fill: this.textColor\n    });\n\n    this.textLabel.y = this.size.h - this.textHeight + (this.textHeight - this.textLabel.height) / 2;\n    if (this.textLabel.width > this.size.w) {\n      this.textLabel.x = 10;\n    } else {\n      this.textLabel.x = (this.size.w - this.textLabel.width) / 2;\n    }\n\n    g.addChild(this.textLabel);\n  }\n  else {\n    g.drawRect(0, 0, this.size.w, this.size.h);\n  }\n  g.endFill();\n  this.addChild(g);\n\n  this.imageSprite        = new PIXI.Sprite(this.placeHolderTexture);\n  this.imageSprite.width  = this.size.w;\n  this.imageSprite.height = this.isWithText ? this.size.h - this.textHeight : this.size.h;\n\n  if (this.imageUrl) {\n    this.setContent(this.imageUrl);\n  }\n\n  this.addChild(this.imageSprite);\n\n  this.stage.repaint();\n\n};\n\n/**\n * 设置广告招贴的图片和文字\n *\n * @param imgUrl {string} 海报的图片路径\n * @param text {string} 海报的标题\n */\nPoster.prototype.setContent = function (imgUrl, text) {\n  if (imgUrl) {\n    imgUrl                   = imgUrl + '?t=' + (new Date()) * 1;\n    this.posterTexture       = PIXI.Texture.fromImage(imgUrl);\n    this.imageSprite.texture = this.posterTexture;\n    var _stage               = this.stage;\n    this.posterTexture.baseTexture.on('loaded', function () {\n      _stage.repaint();\n    });\n  }\n\n  if (this.isWithText && text) {\n    this.textLabel.text = text;\n    if (this.textLabel.width > this.size.w) {\n      this.textLabel.x = 10;\n    } else {\n      this.textLabel.x = (this.size.w - this.textLabel.width) / 2;\n    }\n  }\n  this.text         = text;\n  this.posterSetted = true;\n};\n\n\n\n},{\"../UIObject\":2}],4:[function(require,module,exports){\n(function (global){\nvar tivy = module.exports = {\n  Stage: require('./Stage'),\n  Poster:require('./components/Poster'),\n};\n\nglobal.Tivy = tivy;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./Stage\":1,\"./components/Poster\":3}]},{},[4])(4)\n});\n\n","/**\n * This is a base class which can be placed to {@link Tivy.Stage}\n * 这个是可以放置到舞台上的基类.\n *\n * @class\n * @memberof Tivy\n * @param options {json} - 构造参数, 必须有 stage 参数\n * @constructor\n * @extends PIXI.Container\n */\nfunction UIObject(options) {\n  PIXI.Container.call(this);\n  if (!options) {\n    options = {};\n  }\n\n  this.stage = options.stage;\n  if (!this.stage) {\n    throw new Error('A stage is required.');\n  }\n  this.stage.addChild(this);\n}\n\nUIObject.prototype             = Object.create(PIXI.Container.prototype);\nUIObject.prototype.constructor = UIObject;\nmodule.exports                 = UIObject;","var UIObject = require('../UIObject');\n/**\n * 广告招贴\n *\n * @class\n * @memberof Tivy\n * @param options {json} 配置节点\n * @constructor\n * @extends Tivy.UIObject\n */\nfunction Poster(options) {\n  UIObject.call(this, options);\n  if (!options) {\n    options = {};\n  }\n\n  this.placeHolderTexture = options.placeHolderTexture;\n  if (!this.placeHolderTexture) {\n    throw new Error('placeHolderTexture is null');\n  }\n\n  this.size          = options.size || {w: 300, h: 400};\n  this.position      = options.position || {x: 0, y: 0};\n  this.textColor     = options.textColor || 0x7f7f7f;\n  this.textBgColor   = options.textBgColor || 0xffffff;\n  this.textHeight    = options.textHeight || 50;\n  this.font          = options.font || '25px 迷你简准圆';\n  this.text          = options.text;\n  this.imageUrl      = options.imageUrl;\n  this.isWithText    = options.isWithText || false;\n  this.radius        = options.radius || 15;\n  this.width         = this.size.w;\n  this.height        = this.size.h;\n  this.posterTexture = null;\n  this.imageSprite   = null;\n  this.textLabel     = null;\n  this.imageSetted   = false;\n\n  this.paint();\n}\n\nPoster.prototype             = Object.create(UIObject.prototype);\nPoster.prototype.constructor = Poster;\nmodule.exports               = Poster;\n\n/**\n * 画上去\n *\n * @private\n */\nPoster.prototype.paint = function () {\n  if (this.radius) {\n    var mask = new PIXI.Graphics();\n    mask.lineStyle(0);\n    mask.beginFill(0xffffff);\n    mask.drawRoundedRect(0, 0, this.size.w, this.size.h, this.radius);\n    mask.endFill();\n    this.addChild(mask);\n    this.mask = mask;\n  }\n\n  //背景\n  var g = new PIXI.Graphics();\n  g.lineStyle(0);\n  g.beginFill(this.textBgColor, .5);\n  if (this.isWithText && this.text) {\n    g.drawRect(0, 0, this.size.w, this.size.h - this.textHeight);\n\n    //文字背景\n    g.beginFill(this.textBgColor, .7);\n    g.drawRect(0, this.size.h - 50, this.size.w, this.textHeight);\n\n    this.textLabel = new PIXI.Text(this.text, {\n      font: this.font,\n      fill: this.textColor\n    });\n\n    this.textLabel.y = this.size.h - this.textHeight + (this.textHeight - this.textLabel.height) / 2;\n    if (this.textLabel.width > this.size.w) {\n      this.textLabel.x = 10;\n    } else {\n      this.textLabel.x = (this.size.w - this.textLabel.width) / 2;\n    }\n\n    g.addChild(this.textLabel);\n  }\n  else {\n    g.drawRect(0, 0, this.size.w, this.size.h);\n  }\n  g.endFill();\n  this.addChild(g);\n\n  this.imageSprite        = new PIXI.Sprite(this.placeHolderTexture);\n  this.imageSprite.width  = this.size.w;\n  this.imageSprite.height = this.isWithText ? this.size.h - this.textHeight : this.size.h;\n\n  if (this.imageUrl) {\n    this.setContent(this.imageUrl);\n  }\n\n  this.addChild(this.imageSprite);\n\n  this.stage.repaint();\n\n};\n\n/**\n * 设置广告招贴的图片和文字\n *\n * @param imgUrl {string} 海报的图片路径\n * @param text {string} 海报的标题\n */\nPoster.prototype.setContent = function (imgUrl, text) {\n  if (imgUrl) {\n    imgUrl                   = imgUrl + '?t=' + (new Date()) * 1;\n    this.posterTexture       = PIXI.Texture.fromImage(imgUrl);\n    this.imageSprite.texture = this.posterTexture;\n    var _stage               = this.stage;\n    this.posterTexture.baseTexture.on('loaded', function () {\n      _stage.repaint();\n    });\n  }\n\n  if (this.isWithText && text) {\n    this.textLabel.text = text;\n    if (this.textLabel.width > this.size.w) {\n      this.textLabel.x = 10;\n    } else {\n      this.textLabel.x = (this.size.w - this.textLabel.width) / 2;\n    }\n  }\n  this.text         = text;\n  this.posterSetted = true;\n};\n\n\n","var tivy = module.exports = {\n  Stage: require('./Stage'),\n  Poster:require('./components/Poster'),\n};\n\nglobal.Tivy = tivy;"],"sourceRoot":"./"}