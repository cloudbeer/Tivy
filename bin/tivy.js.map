{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Stage.js","src/UIObject.js","src/UIObjectGroup.js","src/animation/Animal.js","src/animation/AnimalManager.js","src/basic/Button.js","src/basic/ImageFrame.js","src/basic/Tile.js","src/components/Metro.js","src/const.js","src/events/KeyboardManager.js","src/src/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tivy.js","sourceRoot":"./","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * A Stage represents a canvas and an empty PIXI DisplayObject.\n * You can add child into stage directly.\n * And it can be repainted alone.\n *\n * ```js\n * var stage = new Tivy.Stage({\n   *  id: 'stage01', //The canvas id\n   *  size:{width:500, height:400}, //Size of the stage, w is width, h is heigt\n   *  position:{x:0, y:0}, //Position of the stage\n   *  background: '#ccc', //Backgound of the canvas, it is a css style.\n   *  zIndex: 10 //z-index of the canvas, it is a css style.\n   * });\n * ```\n *\n * @class\n * @memberof Tivy\n * @param options {json} - config json object.\n * @constructor\n */\nvar Stage = function (options) {\n  if (!options) {\n    options = {};\n  }\n  this.id         = options.id || 'stage_' + new Date() * 1;\n  this.position   = options.position || {x: 0, y: 0};\n  this.size       = options.size || {width: 1920, height: 1080};\n  this.background = options.background;\n  this.zIndex     = options.zIndex || 0;\n\n  if (document.getElementById(this.id)) {\n    throw new Error('Stage id is dumplicate');\n  }\n\n\n  this.width  = this.size.width;\n  this.height = this.size.height;\n\n  var canvas              = document.createElement('canvas');\n  canvas.id               = this.id;\n  canvas.style.position   = 'absolute';\n  canvas.style.top        = this.position.y;\n  canvas.style.left       = this.position.x;\n  canvas.style.zIndex     = this.zIndex;\n  canvas.style.background = this.background;\n\n  document.body.appendChild(canvas);\n\n  var _stage = new PIXI.Container();\n  //_stage.screenX = this.position.x;\n  //_stage.screenY = this.position.y;\n  //_stage.width  = this.size.width;\n  //_stage.height = this.size.height;\n\n  this.render = new PIXI.WebGLRenderer(this.size.width, this.size.height, {\n    transparent: true,\n    view       : canvas,\n    //antialias: true,\n    forceFXAA  : true\n  });\n\n  _stage.id      = this.id;\n  _stage.isStage = true;\n\n  this._stage = _stage;\n\n};\n\nStage.prototype = {\n  /**\n   * Show the stage.\n   */\n  show: function () {\n    this.renderable = true;\n    this.repaint();\n  },\n  /**\n   * Hide the stage.\n   */\n  hide: function () {\n    this.renderable = false;\n    this.repaint();\n  },\n\n  /**\n   * 重绘\n   * @param uiObject {PIXI.DisplayObject} The object to repaint. if it is null, repaint this stage.\n   */\n  repaint: function (uiObject) {\n    if (uiObject) {\n      this.render.render(uiObject);\n    } else {\n      this.render.render(this._stage);\n    }\n  },\n\n  /**\n   * 增加子节点\n   * @param uiObject {PIXI.DisplayObject} The object to add.\n   */\n  addChild: function (uiObject) {\n    this._stage.addChild(uiObject);\n  },\n\n  removeChild: function (uiObject) {\n    this._stage.removeChild(uiObject);\n  }\n\n};\n\nmodule.exports = Stage;\n","/**\n * This is a base class which can be placed to {@link Tivy.Stage}\n * 这个是可以放置到舞台上的基类.\n *\n * @class\n * @memberof Tivy\n * @extends PIXI.Container\n * @param {Object} options  - json 格式的参数\n * @param {Tivy.Stage} options.stage  - 舞台, 这个参数必须设置\n * @param {PIXI.DisplayObject} options.owner  - 当前物体的父容器\n * @param {{x:number, y:number}} options.position={x:0,y:0} - 位置\n * @param {{width:number, height:number}} options.size - 大小\n */\nfunction UIObject(options) {\n  PIXI.Container.call(this);\n  if (!options) {\n    options = {};\n  }\n\n  this.stage = options.stage;\n  if (!this.stage) {\n    throw new Error('A stage is required.');\n  }\n  this.owner    = options.owner;\n  this.position = options.position || {x: 0, y: 0};\n  this.size     = options.size;\n  if (this.size && this.size.width > 0 && this.size.height > 0) {\n    this.width  = this.size.width;\n    this.height = this.size.height;\n  }\n  if (this.owner) {\n    this.owner.addChild(this);\n  } else {\n    this.stage.addChild(this);\n  }\n}\n\nUIObject.prototype             = Object.create(PIXI.Container.prototype);\nUIObject.prototype.constructor = UIObject;\nmodule.exports                 = UIObject;\n\n/**\n * 将这个置于顶部\n */\nUIObject.prototype.bringToFront = function () {\n  if (this.parent) {\n    var parent = this.parent;\n    parent.removeChild(this);\n    parent.addChild(this);\n  }\n};\n\n/**\n * 将这个置于底部\n */\nUIObject.prototype.sendToBack = function () {\n  if (this.parent) {\n    var parent = this.parent;\n    parent.removeChild(this);\n    parent.addChildAt(this, 0);\n  }\n};","var UIObject = require('./UIObject');\n\n/**\n * 描述了一个控件组, 并绑定了事件\n *\n * @class\n * @param options {json} 配置节点\n * @constructor\n * @memberof Tivy\n * @extends {Tivy.UIObject}\n */\nfunction UIObjectGroup(options) {\n  if (!options) {\n    options = {};\n  }\n  this.size = options.size = options.size || {width: 200, height: 200};\n  UIObject.call(this, options);\n\n\n  /**\n   * 这是控件的装载容器, 新建子控件的时候,需要指定 owner 为 这个 container. 创建这个控件的目的也是为了滑动整个内容\n   * @readonly\n   */\n  this.container = new PIXI.Container();\n  this.addChild(this.container);\n\n  /**\n   * 具有事件响应的控件们\n   * @member {Array}\n   * @readonly\n   */\n  this.controls = [];\n\n  /**\n   * 当前选中的 index\n   * @member {number}\n   * @readonly\n   */\n  this.currentIndex = -1;\n\n  /**\n   * 当前选中的控件\n   * @member {Object}\n   * @readonly\n   */\n  this.currentControl = null;\n\n  /**\n   * 当某个 tile 被执行的时候发生. 例如, 鼠标在tile上点击, touch点击, enter 键按下去\n   * @example\n   *\n   metro.on('execute', function (target, index) {\n      console.log('execute', target.text, index);\n    });\n   *\n   *\n   * @event execute\n   * @memberof Tivy.UIObjectGroup#\n   * @protected\n   */\n\n  /**\n   * 当某个 tile 被聚焦的时候发生. 例如, 鼠标划过 tile, touch 按住, 键盘聚焦等\n   *\n   * @example\n   metro.on('focus', function (target, index) {\n      console.log('focus', target.text, index);\n    });\n   *\n   *\n   * @event focus\n   * @memberof Tivy.UIObjectGroup#\n   * @protected\n   */\n\n  /**\n   * 当某个 tile 失去焦点的时候发生. 例如, 鼠标划过 tile, touch 松开, 键盘移除聚焦等\n   *\n   * @event leave\n   * @memberof Tivy.UIObjectGroup#\n   * @protected\n   */\n\n  /**\n   * 当某个组内的tile改变的时候发生\n   * @example\n   *\n   * metro.on('change', function (target, index, oldTarget, oldIndex) {\n   *   console.log('change', target.text, index);\n   * });\n   *\n   *\n   * @event change\n   * @memberof Tivy.UIObjectGroup#\n   * @protected\n   */\n\n}\n\nUIObjectGroup.prototype             = Object.create(UIObject.prototype);\nUIObjectGroup.prototype.constructor = UIObjectGroup;\nmodule.exports                      = UIObjectGroup;\n\n\n//UIObjectGroup.prototype._init = function () {\n//  var _this = this;\n//};\n\n/**\n * 给控件附加事件\n * @param uiObject {Object} 子元素控件, 在初始化元素之后附加事件\n * @example\n *\n var tile = new Tile({\n      stage             : _this.stage,\n      owner             : someGoupContainer,\n      size              : {width: ele.width, height: ele.height},\n      position          : {x: ele.x, y: ele.y},\n      placeHolderTexture: _this.layout.placeHolderTexture,\n      radius            : 10,\n      data              : somedata\n    });\n someGoupContainer.attachEvent(tile);\n *\n */\nUIObjectGroup.prototype.attachEvent = function (uiObject) {\n\n  this.controls.push(uiObject);\n  var i = this.controls.indexOf(uiObject);\n\n  var _this = this;\n  uiObject.on('mouseover', function () {\n    var oldIndex         = _this.currentIndex;\n    var oldCtr           = _this.currentControl;\n    _this.currentIndex   = i;\n    _this.currentControl = this;\n    _this.emit('focus', this, i);\n    if (oldIndex !== i) {\n      _this.emit('change', this, i, oldCtr, oldIndex);\n    }\n  });\n  uiObject.on('mouseout', function () {\n    _this.emit('leave', this, i);\n  });\n  //uiObject.on('keydown', function () {\n  //  console.log('keydown');\n  //});\n\n  uiObject.on('touchstart', function () {\n    var oldIndex         = _this.currentIndex;\n    var oldCtr           = _this.currentControl;\n    _this.currentIndex   = i;\n    _this.currentControl = this;\n    _this.emit('focus', this, i);\n    if (oldIndex !== i) {\n      _this.emit('change', this, i, oldCtr, oldIndex);\n    }\n  });\n  uiObject.on('touchend', function (data) {\n    if (_this.currentControl == data.target) {\n      _this.emit('execute', this, i);\n    }\n    _this.emit('leave', _this.currentControl, _this.currentIndex);\n  });\n  uiObject.on('click', function (data) {\n    _this.emit('execute', this, i);\n  });\n\n  //uiObject.on('keydown', function (data) {\n  //  console.log('keypress', data);\n  //  //_this.emit('execute', this, i);\n  //});\n\n};\n\n/**\n * 当控件组重新被聚焦的时候, 触发 change 事件\n */\nUIObjectGroup.prototype.activate = function () {\n  if (this.isActive) {\n    return;\n  }\n  UIObject.prototype.activate.call(this);\n\n  if (this.currentIndex < 0) {\n    this.currentIndex   = 0;\n    this.currentControl = this.controls[0];\n  }\n  this.emit('change', this.currentControl, this.currentIndex, null, -1);\n\n};","var EASINGS = require('../const').EASINGS;\n\n/**\n * 一个动画, 这个单词是我故意写错的\n * An animation, this is a wrong word, it is cool!\n *\n * 动画参考了这个 {@link http://javascript.info/tutorial/animation}\n *\n * @class\n * @memberof Tivy\n * @param {json} options - 动画配置\n * @param {Object} options.target - 这个是一个函数,指定 target 的属性\n * @param {string} options.property - 需要变化的物件的属性, 如 'x'\n * @param {number} options.to - 结束的值\n * @param {number} [options.duration=1000] - 运行动画的总时间, 单位 ms\n * @param {function} [options.easing=Tivy.CONST.EASINGS.linear] - 缓动函数,计算属性变化. 默认参考 {@link Tivy.CONST}\n * @param {function} [options.step] - 这个是一个函数, 用于指定 target 的属性\n * @param {number} [options.from] - 开始的值, 如果不指定, 就是动画开始前物体的该属性值\n */\nfunction Animal(options) {\n  this.target   = options.target;\n  this.property = options.property;\n  this.duration = options.duration || 1000;\n  this.easing   = options.easing || EASINGS.linear;\n  this.step     = options.step;\n  this.from     = options.from;\n  this.to       = options.to;\n\n\n  this.tag      = null;\n  this.reserve  = false;\n  this.finished = false;\n\n  this._start = new Date;\n\n}\n\n\nAnimal.prototype.constructor = Animal;\nmodule.exports               = Animal;\n\n\n//Object.defineProperties(Animal.prototype, {\n//  property:{\n//    get: function(){\n//      return this.property;\n//    }\n//  }\n//\n//});","var Animal = require('./Animal');\nvar CONST  = require('../const');\n\n/**\n * 动画管理器\n * @param options {json} 配置\n * @param options.stage {Tivy.Stage} 舞台\n * @param options.duration {number} 动画的运行时间, 单位: ms\n * @param options.fps=60 {number} 帧速率\n * @constructor\n * @memberof Tivy\n *\n * @example\n *\n *  var manager = new Tivy.AnimalManager({\n      stage   : stage,\n      duration: 300,\n      fps     : 30\n    });\n manager.runAnimals();\n */\nfunction AnimalManager(options) {\n  /**\n   * @readonly\n   */\n  this.stage = options.stage;\n  /**\n   * 默认的动画运行时间\n   * @member  {number}\n   */\n  this.duration = options.duration;\n  /**\n   * 帧速率\n   * @member  {number}\n   */\n  this.fps = options.fps || 60;\n\n  /**\n   * 由此得出的间隔时间\n   * @member {number}\n   * @readonly\n   */\n  this.delay = 1000 / this.fps;\n  /**\n   * 动画数组\n   * @member {Array}\n   */\n  this.animals = [];\n\n\n}\n\nAnimalManager.prototype.constructor = AnimalManager;\nmodule.exports                      = AnimalManager;\n\n/**\n * 寻找动画\n * @param _target\n * @param _property\n * @returns {Tivy.Animal}\n */\nAnimalManager.prototype.findAnimal = function (_target, _property) {\n  var animals = this.animals.filter(function (ele) {\n    return ele.target === _target && ele.property === _property;\n  });\n  if (animals.length > 0) {\n    return animals[0];\n  }\n  return null;\n};\n\n\n/**\n * @deprecated\n * 增加一个动画物件, 不建议使用, 请使用 addAnimal 方法\n * @param _target {PIXI.DisplayObject} 需要移动的物体\n * @param _property {string} 物体的属性,比如 \"width\"\n * @param _to {number} 移动到的值\n * @param _from {number} 从哪儿开始移动\n */\nAnimalManager.prototype.addTarget = function (_target, _property, _to, _from) {\n  if (_target.stage !== this.stage) {\n    throw new Error('This target is not in this stage.');\n  }\n  var av3 = arguments[4];\n  var av4 = arguments[5];\n  var av5 = arguments[6];\n  var av6 = arguments[7];\n  var avs = this.parseArg(av3, av4, av5, av6);\n\n  var animal = this.findAnimal(_target, _property);\n\n  if (!animal) {\n    animal = new Animal({\n      target: _target\n    });\n    this.animals.push(animal);\n  }\n\n  animal.property = _property;\n  animal.from     = _from == null ? _target[_property] : _from;\n  animal.to       = _to;\n  animal.step     = function (delta) {\n    _target[_property] = this.from + (_to - this.from) * delta;\n  };\n  animal.easing   = avs._easing || CONST.EASINGS.linear;\n  animal.duration = avs._duration || this.duration;\n  animal.delay    = 1000 / this.fps;\n  animal.reserve  = avs._reserve;\n  animal.tag      = avs._tag;\n  animal.finished = false;\n};\n\n/**\n * 增加一个动画\n * @param _animal {json} 一个json 配置\n * @param _animal.target {PIXI.DisplayObject} 需要动画的物件\n * @param _animal.property {string} 活动属性\n * @param _animal.to {number} 结束的数值\n * @param _animal.from=target.property {number} 开始的数值（默认为当前物件的该属性值）\n * @param _animal.step {function} 赋值的函数\n * @param _animal.easing=CONST.EASINGS.linear {function} 缓动函数, 默认是 linear\n * @param _animal.duration {number} 运行时间\n *\n * @example\n *\n * manager.addAnimal({\n *       target  : frame,\n *       property: 'frameHeight',\n *       to      : target.height\n *     });\n */\nAnimalManager.prototype.addAnimal = function (_animal) {\n  var _target = _animal.target;\n  if (_target.stage !== this.stage) {\n    throw new Error('This target is not in this stage.');\n  }\n  var _property = _animal.property;\n\n  var animal = this.findAnimal(_target, _property);\n\n  if (!animal) {\n    animal          = new Animal({\n      target: _target\n    });\n    animal.property = _property;\n    this.animals.push(animal);\n  }\n  var _to       = _animal.to;\n  var _from     = _animal.from;\n  var _step     = _animal.step;\n  var _easing   = _animal.easing || CONST.EASINGS.linear;\n  var _duration = _animal.duration || this.duration;\n  var _reserve  = _animal.reserve;\n  var _tag      = _animal.tag;\n  if (!_from && _property) {\n    _from = _target[_property];\n  }\n  if (!_step) {\n    _step = function (delta) {\n      _target[_property] = this.from + (_to - this.from) * delta;\n    };\n  }\n  animal.from     = _from;\n  animal.to       = _to;\n  animal.step     = _step;\n  animal.easing   = _easing;\n  animal.duration = _duration;\n  animal.delay    = 1000 / this.fps;\n  animal.reserve  = _reserve;\n  animal.tag      = _tag;\n  animal.finished = false;\n};\n\n/**\n * 运行动画\n */\nAnimalManager.prototype.runAnimals = function () {\n\n  var _this = this;\n\n  var idTimer = window.setInterval(function () {\n\n    var index = 0;\n    _this.animals.forEach(function (ele) {\n      if (ele.finished) {\n        _this.animals.splice(index, 1);\n      } else {\n        var timePassed = new Date - ele._start;\n        var progress   = timePassed / ele.duration;\n        if (progress > 1) {\n          progress = 1;\n        }\n        var delta = ele.easing(progress);\n        ele.step(delta);\n        if (progress == 1) {\n          ele.finished = true;\n        }\n      }\n      index++;\n    });\n    if (_this.animals.length > 0) {\n      _this.stage.repaint();\n    }\n  }, this.delay);\n\n};\n\n/**\n * 解析动画参数\n * @param v1\n * @param v2\n * @param v3\n * @param v4\n * @returns {{}}\n */\nAnimalManager.prototype.parseArg = function (v1, v2, v3, v4) {\n  var t1  = typeof v1;\n  var t2  = typeof v2;\n  var t3  = typeof v3;\n  var t4  = typeof v4;\n  var rtn = {};\n  if (t1 === 'number') {\n    rtn._duration = v1;\n  } else if (t2 === 'number') {\n    rtn._duration = v2;\n  } else if (t3 === 'number') {\n    rtn._duration = v3;\n  } else if (t4 === 'number') {\n    rtn._duration = v4;\n  }\n  if (t1 === 'string') {\n    rtn._tag = v1;\n  } else if (t2 === 'string') {\n    rtn._tag = v2;\n  } else if (t3 === 'string') {\n    rtn._tag = v3;\n  } else if (t4 === 'string') {\n    rtn._tag = v4;\n  }\n  if (t1 === 'function') {\n    rtn._easing = v1;\n  } else if (t2 === 'function') {\n    rtn._easing = v2;\n  } else if (t3 === 'function') {\n    rtn._easing = v3;\n  } else if (t4 === 'function') {\n    rtn._easing = v4;\n  }\n  if (t1 === 'boolean') {\n    rtn._reserve = v1;\n  } else if (t2 === 'boolean') {\n    rtn._reserve = v2;\n  } else if (t3 === 'boolean') {\n    rtn._reserve = v3;\n  } else if (t4 === 'boolean') {\n    rtn._reserve = v4;\n  }\n  return rtn;\n};\n","var UIObject = require('../UIObject');\n\n/**\n * 这是一个按钮, 默认开启了事件支持.\n *\n * @class\n * @param options  {json} 配置节点\n * @example\n * {\n *  stage: stage01, //Instance of Stage\n *  size: {width: 300, height: 400},\n *  position: {x: 0, y: 0},\n *  textureDefault: textureDefault, //required.\n *  textureDown: textureDown,\n * }\n *\n * @constructor\n * @memberof Tivy\n * @extends Tivy.UIObject\n */\nfunction Button(options) {\n  if (!options) {\n    options = {};\n  }\n  UIObject.call(this, options);\n  this.textureDefault = options.textureDefault;\n  if (!this.textureDefault) {\n    throw new Error('textureDefault is required.');\n  }\n  this.textureDown = options.textureDown;\n\n  this.btnSprite   = null;\n  this.interactive = true;\n  this._paint(this.textureDefault);\n\n  var _this = this;\n  if (this.textureDown) {\n    var onPressDown = function () {\n      _this._paint(_this.textureDown);\n    };\n    var onPressUp   = function () {\n      _this._paint(_this.textureDefault);\n    };\n    this.on('mousedown', onPressDown);\n    this.on('mouseup', onPressUp);\n    this.on('touchstart', onPressDown);\n    this.on('touchend', onPressUp);\n  }\n}\n\nButton.prototype             = Object.create(UIObject.prototype);\nButton.prototype.constructor = Button;\nmodule.exports               = Button;\n\nButton.prototype._paint = function (_texture) {\n  if (this.btnSprite) {\n    this.btnSprite.texture = _texture;\n  } else {\n    this.btnSprite = new PIXI.Sprite(_texture);\n    this.addChild(this.btnSprite);\n\n  }\n  var _stage = this.stage;\n  _texture.baseTexture.on('loaded', function () {\n    _stage.repaint();\n  });\n  _stage.repaint();\n};\n\n","var UIObject = require('../UIObject');\n\n/**\n * 这是一个图片外框, 你可以指定一个带有阴影的正方形图片.\n * ```\n var frame = new Tivy.ImageFrame({\n      stage: stage,\n      imageUrl: './assets/img/frame.png',\n      position: {x: 100, y: 100},\n      size: {\n        width: 50, height: 50,\n      },\n      borderLength: 61,\n      radius: 15,\n      imageLength: 130\n    });\n\n * ```\n * @class\n * @memberof Tivy\n * @constructor\n * @extends Tivy.UIObject\n * @param options  {json} 配置节点\n */\nfunction ImageFrame(options) {\n  if (!options) {\n    options = {};\n  }\n  this.size = options.size = options.size || {width: 200, height: 200};\n  UIObject.call(this, options);\n\n  this.imageUrl = options.imageUrl;\n  if (!this.imageUrl) {\n    throw new Error('Frame imageUrl is required.');\n  }\n\n  this.radius       = options.radius;\n  this.borderLength = options.borderLength;\n  this.imageLength  = options.imageLength;\n\n  this._init();\n}\n\n\nImageFrame.prototype             = Object.create(UIObject.prototype);\nImageFrame.prototype.constructor = ImageFrame;\nmodule.exports                   = ImageFrame;\n\nImageFrame.prototype._init = function () {\n  var ttFrame = PIXI.Texture.fromImage(this.imageUrl);\n\n  var cltTT = new PIXI.Texture(ttFrame, {\n    x: 0, y: 0, width: this.borderLength, height: this.borderLength,\n  });\n  var ctTT  = new PIXI.Texture(ttFrame, {\n    x: this.borderLength, y: 0, width: 1, height: this.borderLength,\n  });\n\n  var crtTT = new PIXI.Texture(ttFrame, {\n    x     : this.imageLength - this.borderLength,\n    y     : 0,\n    width : this.borderLength,\n    height: this.borderLength,\n  });\n  var crTT  = new PIXI.Texture(ttFrame, {\n    x     : this.imageLength - this.borderLength,\n    y     : this.borderLength,\n    width : this.borderLength,\n    height: 1,\n  });\n  var crbTT = new PIXI.Texture(ttFrame, {\n    x     : this.imageLength - this.borderLength,\n    y     : this.imageLength - this.borderLength,\n    width : this.borderLength,\n    height: this.borderLength,\n  });\n  var cbTT  = new PIXI.Texture(ttFrame, {\n    x     : this.borderLength,\n    y     : this.imageLength - this.borderLength,\n    width : 1,\n    height: this.borderLength,\n  });\n  var clbTT = new PIXI.Texture(ttFrame, {\n    x     : 0,\n    y     : this.imageLength - this.borderLength,\n    width : this.borderLength,\n    height: this.borderLength,\n  });\n  var clTT  = new PIXI.Texture(ttFrame, {\n    x: 0, y: this.borderLength, width: this.borderLength, height: 1,\n  });\n  var clt   = this._clt = new PIXI.Sprite(cltTT);\n  var ct = this._ct = new PIXI.Sprite(ctTT);\n  var crt = this._crt = new PIXI.Sprite(crtTT);\n  var cr = this._cr = new PIXI.Sprite(crTT);\n  var crb = this._crb = new PIXI.Sprite(crbTT);\n  var cb = this._cb = new PIXI.Sprite(cbTT);\n  var clb = this._clb = new PIXI.Sprite(clbTT);\n  var cl = this._cl = new PIXI.Sprite(clTT);\n\n  this.addChild(clt);\n  this.addChild(ct);\n  this.addChild(crt);\n  this.addChild(cr);\n  this.addChild(crb);\n  this.addChild(cb);\n  this.addChild(clb);\n  this.addChild(cl);\n  this.setSize(this.size);\n};\n\n\n/**\n * 设置尺寸\n * @param newSize {json} 尺寸\n * ```json\n * {width:100, height:100}\n * ```\n */\nImageFrame.prototype.setSize = function (newSize) {\n  var nWidth  = newSize.width,\n      nHeight = newSize.height;\n  if (nWidth <= 2 * this.radius) {\n    nWidth = 2 * this.radius + 1;\n  }\n  if (nHeight <= 2 * this.radius) {\n    nHeight = 2 * this.radius + 1;\n  }\n\n  this.size.width  = nWidth;\n  this.size.height = nHeight;\n  // size.x = Math.round(size.x);\n  // size.y = Math.round(size.y);\n\n  this._clt.position = {\n    x: -this.borderLength + this.radius, y: -this.borderLength + this.radius,\n  };\n  this._crt.position = {\n    x: nWidth - this.radius, y: this.radius - this.borderLength,\n  };\n  this._crb.position = {\n    x: nWidth - this.radius, y: nHeight - this.radius,\n  };\n  this._clb.position = {\n    x: this.radius - this.borderLength, y: nHeight - this.radius,\n  };\n  this._ct.position  = {\n    x: this.radius, y: -this.borderLength + this.radius,\n  };\n  this._ct.width     = nWidth - this.radius * 2;\n  this._cr.position  = {\n    x: nWidth - this.radius, y: this.radius,\n  };\n  this._cr.height    = nHeight - this.radius * 2;\n  this._cb.position  = {\n    x: this.radius, y: nHeight - this.radius,\n  };\n\n  this._cb.width    = nWidth - this.radius * 2;\n  this._cl.position = {\n    x: this.radius - this.borderLength, y: this.radius,\n  };\n  this._cl.height   = nHeight - this.radius * 2;\n\n};\n\n/**\n * 设置位置\n *\n * @param newPosition {json} 位置\n * ```json\n * { x:10, y:10 }\n * ```\n */\nImageFrame.prototype.setPosition = function (newPosition) {\n  this.x = newPosition.x;\n  this.y = newPosition.y;\n};\n\n\nObject.defineProperties(ImageFrame.prototype, {\n  /**\n   * 获取或者设置框架的宽度\n   *\n   * @member {number}\n   * @memberof Tivy.ImageFrame#\n   */\n  frameWidth : {\n    get: function () {\n      return this.size.width;\n    },\n    set: function (value) {\n      this.setSize({width: value, height: this.size.height});\n    }\n  },\n  /**\n   * 获取或者设置框架的高度\n   *\n   * @member {number}\n   * @memberof Tivy.ImageFrame#\n   */\n  frameHeight: {\n    get: function () {\n      return this.size.height;\n    },\n    set: function (value) {\n      this.setSize({width: this.size.width, height: value});\n    }\n\n  }\n});\n\n/**\n * 设置一个框框\n *\n * @param newBounds {json} 框框\n * ```json\n * { x:0, y:0, width:100, height:100 }\n * ```\n */\nImageFrame.prototype.setBounds = function (newBounds) {\n  this.x = newBounds.x;\n  this.y = newBounds.y;\n  this.setSize({width: newBounds.width, height: newBounds.height});\n\n};","var UIObject = require('../UIObject');\n/**\n * 广告招贴\n *\n *\n * @example\n *\n var xTexture = PIXI.Texture.fromImage('./assets/img/place-holder.png');\n xTexture.baseTexture.on('loaded', function () {\n    var tile = new Tivy.Tile({\n      size: {width: 192, height: 338},\n      stage: stage,\n      showText: true,\n      text: \"中文\",\n      position: {x: 30, y: 30},\n      placeHolderTexture: xTexture,\n      textBgColor: 0x006600,\n      textColor:0xffffff,\n      //imageUrl:'./assets/img/test.png'\n    });\n\n    poster.setContent('./assets/img/test.png', '长发公主');\n\n    window.setTimeout(function () {\n      poster.destroy();\n    }, 10000);\n  });\n\n *\n * @class\n * @memberof Tivy\n * @extends Tivy.UIObject\n * @param {json} options - 配置节点\n * @param {{width: number, height: number}} options.size={width:300,height:400}  - 尺寸\n * @param {PIXI.Texture} options.placeHolderTexture  - 素材贴图, 为了占位\n * @param {boolean} options.showText=false - 是否显示文字\n * @param {string} options.text - 要显示的文字\n * @param {number|string} options.textColor=0x7f7f7f - 文字颜色\n * @param {number|string} options.textBgColor=0xffffff - 文字背景颜色\n * @param {number} options.textHeight=50 - 文字区块的高度\n * @param {string} options.font - 字体, 如 '25px 迷你简准圆'\n * @param {string} options.imageUrl - 图片地址\n * @param {number} options.radius=0 - 瓷片的圆角\n *\n */\nfunction Tile(options) {\n  if (!options) {\n    options = {};\n  }\n  this.size = options.size = options.size || {width: 300, height: 400};\n  UIObject.call(this, options);\n\n  this.placeHolderTexture = options.placeHolderTexture;\n  //if (!this.placeHolderTexture) {\n  //  throw new Error('placeHolderTexture is null');\n  //}\n\n  this.showText      = options.showText || false;\n  this.text          = options.text;\n  this.textColor     = options.textColor || 0x7f7f7f;\n  this.textBgColor   = options.textBgColor || 0xffffff;\n  this.textHeight    = options.textHeight || 50;\n  this.font          = options.font || '25px 迷你简准圆';\n  this.imageUrl      = options.imageUrl;\n  this.radius        = options.radius || 0;\n  this.posterTexture = null;\n  this.imageSprite   = null;\n  this.textLabel     = null;\n  this.posterSetted  = false;\n  this.interactive   = true;\n  this.data          = null;\n  this.myIndex       = options.myIndex || 0;\n\n  this._init();\n}\n\nTile.prototype             = Object.create(UIObject.prototype);\nTile.prototype.constructor = Tile;\nmodule.exports             = Tile;\n\n/**\n * 初始化\n *\n * @private\n */\nTile.prototype._init = function () {\n  if (this.radius) {\n    var mask = new PIXI.Graphics();\n    mask.lineStyle(0);\n    mask.beginFill(0xffffff);\n    mask.drawRoundedRect(0, 0, this.size.width, this.size.height, this.radius);\n    mask.endFill();\n    this.addChild(mask);\n    this.mask = mask;\n  }\n\n  //背景\n  var g = new PIXI.Graphics();\n  g.lineStyle(0);\n  g.beginFill(this.textBgColor, .5);\n  if (this.showText && this.text) {\n    g.drawRect(0, 0, this.size.width, this.size.height - this.textHeight);\n\n    //文字背景\n    g.beginFill(this.textBgColor, .7);\n    g.drawRect(0, this.size.height - 50, this.size.width, this.textHeight);\n\n    this.textLabel = new PIXI.Text(this.text, {\n      font: this.font,\n      fill: this.textColor\n    });\n\n    this.textLabel.y = this.size.height - this.textHeight + (this.textHeight - this.textLabel.height) / 2;\n    if (this.textLabel.width > this.size.width) {\n      this.textLabel.x = 10;\n    } else {\n      this.textLabel.x = (this.size.width - this.textLabel.width) / 2;\n    }\n\n    g.addChild(this.textLabel);\n  }\n  else {\n    g.drawRect(0, 0, this.size.width, this.size.height);\n  }\n  g.endFill();\n  this.addChild(g);\n\n  this.imageSprite        = new PIXI.Sprite(this.placeHolderTexture);\n  this.imageSprite.width  = this.size.width;\n  this.imageSprite.height = this.showText ? this.size.height - this.textHeight : this.size.height;\n  //this.imageSprite.setInteractive(true);\n\n  if (this.imageUrl) {\n    this.setContent(this.imageUrl);\n  }\n\n  this.addChild(this.imageSprite);\n\n  this.stage.repaint();\n\n};\n\n/**\n * 设置广告招贴的图片和文字\n *\n * @param {string} imgUrl 海报的图片路径\n * @param {string} [text] - 海报的标题\n * @param {Object} [data] - 附加的数据\n */\nTile.prototype.setContent = function (imgUrl, text, data) {\n  if (imgUrl) {\n    imgUrl                   = imgUrl + '?t=' + (new Date()) * 1;\n    this.posterTexture       = PIXI.Texture.fromImage(imgUrl);\n    this.imageSprite.texture = this.posterTexture;\n    var _stage               = this.stage;\n    this.posterTexture.baseTexture.on('loaded', function () {\n      _stage.repaint();\n    });\n  }\n\n  if (this.showText && text) {\n    this.textLabel.text = text;\n    if (this.textLabel.width > this.size.width) {\n      this.textLabel.x = 10;\n    } else {\n      this.textLabel.x = (this.size.width - this.textLabel.width) / 2;\n    }\n  }\n  this.text         = text;\n  this.data         = data;\n  this.posterSetted = true;\n};\n\n\n/**\n * 销毁海报\n * Destroys the poster\n * @param {boolean} [reserveTexture=false] - 是否保留贴图, 默认不保存\n */\nTile.prototype.destroy = function (reserveTexture) {\n  this.removeChildren();\n  this.stage.removeChild(this);\n  UIObject.prototype.destroy.call(this, true);\n\n  //this.imageSprite.texture = this.placeHolderTexture;\n  if (!reserveTexture) {\n    if (this.posterTexture && this.posterSetted) {\n      this.posterTexture.destroy(true);\n    }\n  }\n  this.stage.repaint();\n};\n\n","var UIObjectGroup = require('../UIObjectGroup');\nvar Tile          = require('../basic/Tile');\nvar KEY_CODES     = require('../const').KEY_CODES;\n\n/**\n * Metro 是一组自定义位置 tile 的组合\n *\n * @example\n var xTexture = PIXI.Texture.fromImage('./assets/img/place-holder.png');\n\n var layout = {\n    placeHolderTexture: xTexture,\n    radius: 20,\n    tiles: [\n      {\n        x: 0, y: 0, width: 200, height: 200,\n        showText: false,\n        radius: 0\n      },\n      {\n        x: 0, y: 210, width: 200, height: 200,\n        showText: false,\n        radius: 0\n      },\n      {\n        x: 0, y: 420, width: 200, height: 200,\n        showText: false,\n        radius: 0\n      },\n      {\n        x: 210, y: 0, width: 400, height: 620,\n        showText: false\n      },\n      {\n        x: 620, y: 0, width: 500, height: 305,\n        showText: false,\n        radius: 0\n      },\n      {\n        x: 620, y: 315, width: 500, height: 305,\n        showText: false,\n        radius: 0\n      },\n      {\n        x: 1130, y: 0, width: 410, height: 410,\n        showText: false,\n        radius: 10\n      },\n      {\n        x: 1130, y: 420, width: 200, height: 200,\n        showText: false,\n        radius: 10\n      },\n      {\n        x: 1340, y: 420, width: 200, height: 200,\n        showText: false,\n        radius: 10\n      },\n      {\n        x: 1550, y: 0, width: 500, height: 305,\n        showText: false,\n        radius: 10\n      },\n      {\n        x: 1550, y: 315, width: 500, height: 305,\n        showText: false,\n        radius: 10\n      },\n      {\n        x: 2060, y: 0, width: 410, height: 410,\n        showText: false,\n        radius: 10\n      },\n      {\n        x: 2060, y: 420, width: 200, height: 200,\n        showText: false,\n        radius: 10\n      },\n      {\n        x: 2270, y: 420, width: 200, height: 200,\n        showText: false,\n        radius: 10\n      }\n    ]\n  };\n var data   = [\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正0'\n },\n {\n   imageUrl: './assets/img/200X200.jpg',\n   text: '小正1'\n },\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正2'\n },\n {\n   imageUrl: './assets/img/400X620-1.jpeg',\n   text: '大长3'\n },\n {\n   imageUrl: './assets/img/500X305-1.jpg',\n   text: '中横4'\n },\n {\n   imageUrl: './assets/img/500X305-2.jpg',\n   text: '中横5'\n },\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正6'\n },\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正7'\n },\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正8'\n },\n {\n   imageUrl: './assets/img/500X305-1.jpg',\n   text: '中横9'\n },\n {\n   imageUrl: './assets/img/500X305-2.jpg',\n   text: '中横10'\n },\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正11'\n },\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正12'\n },\n {\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正13'\n },\n\n ];\n\n\n var stage = new Tivy.Stage({\n    background: '#000',\n    id: 'stage01',\n    //size: {width: $(document.body).width(), height: $(document.body).height()}\n    size: {width: 1920, height: 1080}\n  });\n\n xTexture.baseTexture.on('loaded', function () {\n    var metro = new Tivy.Metro({\n      position: {x: 100, y: 200},\n      stage: stage,\n      layout: layout\n    });\n\n    metro.bindData(data);\n\n  });\n\n *\n *\n *\n * @class\n * @memberof Tivy\n * @extends {Tivy.UIObjectGroup}\n * @param {json} options  - Metro config\n * @param {json} options.layout  - 布局配置\n */\nfunction Metro(options) {\n  if (!options) {\n    options = {};\n  }\n  UIObjectGroup.call(this, options);\n\n  this.layout = options.layout;\n  if (!this.layout) {\n    throw new Error('layout is null');\n  }\n  this._init();\n\n}\n\n\nMetro.prototype             = Object.create(UIObjectGroup.prototype);\nMetro.prototype.constructor = Metro;\nmodule.exports              = Metro;\n\n\n/**\n * 初始化\n *\n * @private\n */\nMetro.prototype._init = function () {\n  //Draw layout\n  var _this = this;\n  this.layout.tiles.forEach(function (ele, i) {\n    var tile      = new Tile({\n      stage             : _this.stage,\n      owner             : _this.container,\n      size              : {width: ele.width, height: ele.height},\n      position          : {x: ele.x, y: ele.y},\n      placeHolderTexture: _this.layout.placeHolderTexture,\n      radius            : ele.radius == null ? _this.layout.radius : ele.radius,\n      data              : ele.data,\n      myIndex           : i\n    });\n    tile.myLayout = ele;\n    _this.attachEvent(tile);\n  });\n\n  this.on('keydown', function (evt) {\n    var _this    = this;\n    var oldCtr   = this.currentControl;\n    var oldIndex = this.currentIndex;\n    var mearContrl;\n    switch (evt.which) {\n      case KEY_CODES.ENTER:\n        this.emit('execute', this.currentControl, this.currentIndex);\n        break;\n      case KEY_CODES.RIGHT:\n        var myRightControls = this.controls.filter(function (ele) {\n          return ele.myLayout.x > oldCtr.myLayout.x //左边要大\n            && ele.myLayout.x + ele.myLayout.width > oldCtr.myLayout.x + oldCtr.myLayout.width //右边也大\n            && ele.myLayout.y + ele.myLayout.height > oldCtr.myLayout.y //不能完全在上面\n            && ele.myLayout.y < oldCtr.myLayout.y + oldCtr.myLayout.height; //不能完全在下面\n        });\n\n        if (myRightControls.length > 0) {\n          mearContrl          = myRightControls.reduce(function (a, b) {\n            var disAX = Math.abs(a.myLayout.x - oldCtr.x);\n            var disAY = Math.abs(a.myLayout.y - oldCtr.y);\n            var disBX = Math.abs(b.myLayout.x - oldCtr.x);\n            var disBY = Math.abs(b.myLayout.y - oldCtr.y);\n            var disA  = Math.sqrt(disAX * disAX + disAY * disAY);\n            var disB  = Math.sqrt(disBX * disBX + disBY * disBY);\n            return disA < disB ? a : b;\n          });\n          this.currentIndex   = mearContrl.myIndex;\n          this.currentControl = mearContrl;\n        }\n        if (this.currentIndex !== oldIndex) {\n          this.emit('change', this.currentControl, this.currentIndex, oldCtr, oldIndex);\n        }\n        break;\n      case KEY_CODES.LEFT:\n        var myLeftControls = this.controls.filter(function (ele) {\n          return ele.myLayout.x < oldCtr.myLayout.x\n            && ele.myLayout.x + ele.myLayout.width < oldCtr.myLayout.x + oldCtr.myLayout.width //右边也大\n            && ele.myLayout.y + ele.myLayout.height > oldCtr.myLayout.y //不能完全在上面\n            && ele.myLayout.y < oldCtr.myLayout.y + oldCtr.myLayout.height; //不能完全在下面\n        });\n        if (myLeftControls.length > 0) {\n          mearContrl          = myLeftControls.reduce(function (a, b) {\n            var disAX = Math.abs(a.myLayout.x - oldCtr.x);\n            var disAY = Math.abs(a.myLayout.y - oldCtr.y);\n            var disBX = Math.abs(b.myLayout.x - oldCtr.x);\n            var disBY = Math.abs(b.myLayout.y - oldCtr.y);\n            var disA  = Math.sqrt(disAX * disAX + disAY * disAY);\n            var disB  = Math.sqrt(disBX * disBX + disBY * disBY);\n            return disA < disB ? a : b;\n          });\n          this.currentIndex   = mearContrl.myIndex;\n          this.currentControl = mearContrl;\n        }\n        this.currentControl = this.controls[this.currentIndex];\n        if (this.currentIndex !== oldIndex) {\n          this.emit('change', this.currentControl, this.currentIndex, oldCtr, oldIndex);\n        }\n        break;\n      case KEY_CODES.UP:\n        var myUpControls = this.controls.filter(function (ele) {\n          return ele.myLayout.y < oldCtr.myLayout.y\n            && ele.myLayout.y + ele.myLayout.height < oldCtr.myLayout.y + oldCtr.myLayout.height\n            && ele.myLayout.x + ele.myLayout.width > oldCtr.myLayout.x //不能完全在左边面\n            && ele.myLayout.x < oldCtr.myLayout.x + oldCtr.myLayout.width; //不能完全在右边\n        });\n        if (myUpControls.length > 0) {\n          mearContrl          = myUpControls.reduce(function (a, b) {\n            var disAX = Math.abs(a.myLayout.x - oldCtr.x);\n            var disAY = Math.abs(a.myLayout.y - oldCtr.y);\n            var disBX = Math.abs(b.myLayout.x - oldCtr.x);\n            var disBY = Math.abs(b.myLayout.y - oldCtr.y);\n            var disA  = Math.sqrt(disAX * disAX + disAY * disAY);\n            var disB  = Math.sqrt(disBX * disBX + disBY * disBY);\n            return disA < disB ? a : b;\n          });\n          this.currentIndex   = mearContrl.myIndex;\n          this.currentControl = mearContrl;\n        }\n        this.currentControl = this.controls[this.currentIndex];\n        if (this.currentIndex !== oldIndex) {\n          this.emit('change', this.currentControl, this.currentIndex, oldCtr, oldIndex);\n        }\n        break;\n      case KEY_CODES.DOWN:\n        var myDownControls = this.controls.filter(function (ele) {\n          return ele.myLayout.y > oldCtr.myLayout.y\n            && ele.myLayout.y + ele.myLayout.height > oldCtr.myLayout.y + oldCtr.myLayout.height\n            && ele.myLayout.x + ele.myLayout.width > oldCtr.myLayout.x //不能完全在左边面\n            && ele.myLayout.x < oldCtr.myLayout.x + oldCtr.myLayout.width; //不能完全在右边\n        });\n        if (myDownControls.length > 0) {\n          mearContrl          = myDownControls.reduce(function (a, b) {\n            var disAX = Math.abs(a.myLayout.x - oldCtr.x);\n            var disAY = Math.abs(a.myLayout.y - oldCtr.y);\n            var disBX = Math.abs(b.myLayout.x - oldCtr.x);\n            var disBY = Math.abs(b.myLayout.y - oldCtr.y);\n            var disA  = Math.sqrt(disAX * disAX + disAY * disAY);\n            var disB  = Math.sqrt(disBX * disBX + disBY * disBY);\n            return disA < disB ? a : b;\n          });\n          this.currentIndex   = mearContrl.myIndex;\n          this.currentControl = mearContrl;\n        }\n        this.currentControl = this.controls[this.currentIndex];\n        if (this.currentIndex !== oldIndex) {\n          this.emit('change', this.currentControl, this.currentIndex, oldCtr, oldIndex);\n        }\n        break;\n    }\n  });\n\n};\n\n/**\n * 绑定数据\n *\n * @param {Object} newData - 绑定的数据, 格式如下:\n *\n * ```\n *  [{\n   imageUrl: './assets/img/200X200-1.jpg',\n   text: '小正0',\n   data: 'anything'\n },\n {\n   imageUrl: './assets/img/200X200.jpg',\n   text: '小正1',\n   data: 'anything'\n }]\n * ```\n *\n */\nMetro.prototype.bindData = function (newData) {\n  var _this = this;\n  newData.forEach(function (ele, i) {\n    _this.controls[i].setContent(ele.imageUrl, ele.text, ele.data);\n  });\n};\n\n","/**\n * 静态值\n * Constant values used in Tivy\n *\n * @namespace\n * @static\n * @memberof Tivy\n */\nvar CONST = {\n  /**\n   * 键盘的键值, 定义了通用遥控器的主要键\n   * Main keycode of remoter\n   * @property {Object} KEY_CODES - 键盘的按键值\n   * @property {number} KEY_CODES.ENTER=13 - 回车\n   * @property {number} KEY_CODES.ESC=27 - 返回\n   * @property {number} KEY_CODES.LEFT=37 - 左\n   * @property {number} KEY_CODES.UP=38 - 上\n   * @property {number} KEY_CODES.RIGHT=39 - 右\n   * @property {number} KEY_CODES.DOWN=40 - 下\n   */\n  KEY_CODES: {\n    ENTER : 13,\n    ESC   : 27,\n    LEFT  : 37,\n    UP    : 38,\n    RIGHT : 39,\n    DOWN  : 40,\n    ENTER2: 108,\n\n    //多媒体\n    SEARCH  : 170,\n    FAVORITE: 171,\n    BROWSER : 172,\n    MUTE    : 173,\n    VOL_DOWN: 174,\n    VOL_UP  : 175,\n    STOP    : 179,\n    EMAIL   : 180\n  },\n  /**\n   * 缓动函数\n   *\n   * @property {function} linear - 线性动画\n   * @property {function} swing - swing\n   * @property {function} easeInQuad - easeInQuad\n   * @property {function} easeOutQuad - easeOutQuad\n   * @property {function} easeInOutQuad - easeInOutQuad\n   * @property {function} easeInCubic - easeInCubic\n   * @property {function} easeOutCubic - easeOutCubic\n   * @property {function} easeInOutCubic - easeInOutCubic\n   * @property {function} easeInQuart - easeInQuart\n   * @property {function} easeOutQuart - easeOutQuart\n   * @property {function} easeInOutQuart - easeInOutQuart\n   * @property {function} easeInQuint - easeInQuint\n   * @property {function} easeOutQuint - easeOutQuint\n   * @property {function} easeInOutQuint - easeInOutQuint\n   */\n  EASINGS  : {\n    linear: function (t) {\n      return t;\n    },\n    swing : function (t) {\n      return 0.5 - Math.cos(t * Math.PI) / 2;\n    },\n\n    easeInQuad      : function (t) {\n      return t * t;\n    },\n    // decelerating to zero velocity\n    easeOutQuad     : function (t) {\n      return t * (2 - t);\n    },\n    // acceleration until halfway, then deceleration\n    easeInOutQuad   : function (t) {\n      return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    },\n    // accelerating from zero velocity\n    easeInCubic     : function (t) {\n      return t * t * t;\n    },\n    // decelerating to zero velocity\n    easeOutCubic    : function (t) {\n      return (--t) * t * t + 1;\n    },\n    // acceleration until halfway, then deceleration\n    easeInOutCubic  : function (t) {\n      return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n    },\n    // accelerating from zero velocity\n    easeInQuart     : function (t) {\n      return t * t * t * t;\n    },\n    // decelerating to zero velocity\n    easeOutQuart    : function (t) {\n      return 1 - (--t) * t * t * t;\n    },\n    // acceleration until halfway, then deceleration\n    easeInOutQuart  : function (t) {\n      return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t;\n    },\n    // accelerating from zero velocity\n    easeInQuint     : function (t) {\n      return t * t * t * t * t;\n    },\n    // decelerating to zero velocity\n    easeOutQuint    : function (t) {\n      return 1 + (--t) * t * t * t * t;\n    },\n    // acceleration until halfway, then deceleration\n    easeInOutQuint  : function (t) {\n      return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t;\n    },\n    easeInSine      : function (t) {\n      return -Math.cos(t * (Math.PI / 2)) + 1;\n    },\n    easeOutSine     : function (t) {\n      return Math.sin(t * (Math.PI / 2));\n    },\n    easeInOutSine   : function (t) {\n      return -1 / 2 * (Math.cos(Math.PI * t) - 1);\n    },\n    //easeOutInSine   : function (t) {\n    //  if (t < 0.5) {\n    //    return this.easeOutSine(t);\n    //  }\n    //  return this.easeInSine(t);\n    //},\n    easeInExpo      : function (t) {\n      return (t == 0) ? 0 : Math.pow(2, 10 * (t - 1));\n    },\n    easeOutExpo     : function (t) {\n      return (t == 1) ? 1 : (-Math.pow(2, -10 * t) + 1);\n    },\n    easeInOutExpo   : function (t) {\n      if (t == 0) {\n        return 0;\n      }\n      if (t == 1) {\n        return 1;\n      }\n      t = t * 2;\n      if (t < 1) {\n        return 1 / 2 * Math.pow(2, 10 * (t - 1)) - 0.0005;\n      }\n      t = t - 1;\n      return 1 / 2 * 1.0005 * (-Math.pow(2, -10 * t) + 2);\n    },\n    //easeOutInExpo   : function (t) {\n    //  if (t < 0.5) {\n    //    return CONST.EASINGS.easeOutExpo(t);\n    //  }\n    //  return CONST.EASINGS.easeInExpo(t);\n    //},\n    easeInCirc      : function (t) {\n      return -1 * (Math.sqrt(1 - t * t) - 1);\n    },\n    easeOutCirc     : function (t) {\n      t = t - 1;\n      return Math.sqrt(1 - t * t);\n    },\n    easeInOutCirc   : function (t) {\n      if ((t /= 1 / 2) < 1) {\n        return -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n      }\n      return 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n    },\n    //easeOutInCirc   : function (t) {\n    //  if (t < 0.5) {\n    //    return CONST.EASINGS.easeOutCirc(t);\n    //  }\n    //  return CONST.EASINGS.easeInCirc(t);\n    //},\n    easeInElastic   : function (t) {\n      if (t == 0 || t == 1) {\n        return t;\n      }\n      var p = 0.3;\n      var s = p / 4;\n      return -Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p);\n    },\n    easeOutElastic  : function (t) {\n      if (t == 0 || t == 1) {\n        return t;\n      }\n      var p = 0.3;\n      var s = p / 4;\n      return Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;\n    },\n    easeInOutElastic: function (t) {\n      if (t == 0 || t == 1) {\n        return t;\n      }\n      t     = t * 2;\n      var p = 0.3 * 1.5;\n      var s = p / 4;\n\n      if (t < 1) {\n        return -.5 * (Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p))\n      }\n      return Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p) * .5 + 1;\n\n    },\n    easeInBack      : function (t) {\n      var s = 1.70158;\n      return t * t * ((s + 1) * t - s);\n    },\n    easeOutBack     : function (t) {\n      var s = 1.70158;\n      return ((t = t - 1) * t * ((s + 1) * t + s) + 1);\n    },\n    easeInOutBack   : function (t) {\n      var s = 1.70158;\n      if ((t *= 2) < 1) {\n        return 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\n      }\n      return 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n    },\n    easeOutBounce   : function (t) {\n      if ((t) < (1 / 2.75)) {\n        return (7.5625 * t * t);\n      } else if (t < (2 / 2.75)) {\n        return (7.5625 * (t -= (1.5 / 2.75)) * t + .75);\n      } else if (t < (2.5 / 2.75)) {\n        return (7.5625 * (t -= (2.25 / 2.75)) * t + .9375);\n      } else {\n        return (7.5625 * (t -= (2.625 / 2.75)) * t + .984375);\n      }\n    }\n    //easeInBounce    : function (t) {\n    //  return 1 - CONST.EASINGS.easeOutBounce(t);\n    //},\n    //easeInOutBounce : function (t) {\n    //  //if (t < d / 2) {\n    //  //  return jQuery.easing.easeInBounce(x, t * 2, 0, c, d) * .5 + b;\n    //  //}\n    //  //return jQuery.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * .5 + c * .5 + b;\n    //}\n  }\n};\n\nmodule.exports = CONST;","/**\n * 键盘事件管理器, 此类已经混合进 UIObject, 可以直接在 UIObject 示例上进行调用\n * @mixin\n * @constructor\n * @memberof Tivy\n */\nfunction KeyboardManager() {\n  /**\n   * 目标 object 是否可以响应键盘事件\n   *\n   * @member {boolean}\n   */\n  this.isActive = false;\n\n\n  /**\n   * 按键区域被激活后\n   * @example\n   * metro.on('activated', function () {});\n   * @event activated\n   * @memberof Tivy.KeyboardManager#\n   */\n\n  /**\n   * 激活区域被取消\n   * @event deactivated\n   * @memberof Tivy.KeyboardManager#\n   */\n  /**\n   * 键盘被按\n   * @event keypress\n   * @memberof Tivy.KeyboardManager#\n   */\n\n  /**\n   * 按键按下\n   * @example\n   * metro.on('keydown', function () {});\n   * @event keydown\n   * @memberof Tivy.KeyboardManager#\n   */\n\n  /**\n   * 按键抬起\n   * @event keyup\n   * @memberof Tivy.KeyboardManager#\n   */\n\n\n}\n\nKeyboardManager.prototype.constructor = KeyboardManager;\nmodule.exports                        = KeyboardManager;\n\n/**\n * 激活按键区域, 并绑定事件\n */\nKeyboardManager.prototype.activate = function () {\n  if (this.isActive) {\n    return;\n  }\n  this.isActive = true;\n\n\n  var _this = this;\n  window.document.addEventListener('keydown', function (keyboardEvent) {\n    _this.emit('keydown', keyboardEvent);\n  }, true);\n  window.document.addEventListener('keyup', function (keyboardEvent) {\n    _this.emit('keyup', keyboardEvent);\n  }, true);\n  window.document.addEventListener('keypress', function (keyboardEvent) {\n    _this.emit('keypress', keyboardEvent);\n  }, true);\n\n  this.emit('activated');\n};\n\n/**\n * 取消激活\n */\nKeyboardManager.prototype.deactivate = function () {\n  if (!this.isActive) {\n    return;\n  }\n\n\n  this.isActive = false;\n  window.document.removeEventListener('keydown');\n  window.document.removeEventListener('keyup');\n  window.document.removeEventListener('keypress');\n\n  this.emit('deactivated');\n\n};\n","var tivy = module.exports = {\n  CONST          : require('./const'),\n  UIObject       : require('./UIObject'),\n  UIObjectGroup  : require('./UIObjectGroup'),\n  Stage          : require('./Stage'),\n  Button         : require('./basic/Button'),\n  Tile           : require('./basic/Tile'),\n  ImageFrame     : require('./basic/ImageFrame'),\n  Metro          : require('./components/Metro'),\n  KeyboardManager: require('./events/KeyboardManager'),\n  Animal         : require('./animation/Animal'),\n  AnimalManager  : require('./animation/AnimalManager'),\n};\n\n//mixin tow class\nObject.assign(\n  tivy.UIObject.prototype,\n  tivy.KeyboardManager.prototype\n);\n\n\nglobal.Tivy = tivy;\n"]}